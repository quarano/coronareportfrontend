<mat-card>
  <mat-card-header>
    <button type="button" mat-icon-button color="primary" routerLink="new">
      <i class="material-icons">add</i>
      Neuen Eintrag anlegen
    </button>
  </mat-card-header>
  <mat-card-content>
    <mat-accordion>
      <mat-expansion-panel
        *ngFor="let group of diaryEntries | keyvalue"
        [expanded]="group.key === today"
      >
        <mat-expansion-panel-header>
          <mat-panel-title>
            <span
              [matBadge]="group.value.length"
              matBadgeOverlap="false"
              matBadgeSize="small"
              >{{ group.key }}</span
            >
          </mat-panel-title>
        </mat-expansion-panel-header>
        <table mat-table [dataSource]="group.value" class="mat-elevation-z8">
          <ng-container matColumnDef="dateTime">
            <th mat-header-cell *matHeaderCellDef>Uhrzeit</th>
            <td mat-cell *matCellDef="let element">
              {{ element.dateTime | date: "HH:mm" }}
            </td>
          </ng-container>

          <ng-container matColumnDef="bodyTemperature">
            <th mat-header-cell *matHeaderCellDef>Körpertemperatur in °C</th>
            <td mat-cell *matCellDef="let element">
              {{ element.bodyTemperature }}
            </td>
          </ng-container>

          <ng-container matColumnDef="symptoms">
            <th mat-header-cell *matHeaderCellDef>Symptome</th>
            <td mat-cell *matCellDef="let element">
              {{ toStringSymptoms(element) }}
            </td>
          </ng-container>

          <ng-container matColumnDef="contactPersonList">
            <th mat-header-cell *matHeaderCellDef>Kontaktpersonen</th>
            <td mat-cell *matCellDef="let element">
              {{ toStringContactPersons(element) }}
            </td>
          </ng-container>

          <ng-container matColumnDef="transmittedToHealthDepartment">
            <th mat-header-cell *matHeaderCellDef>
              Übertragen an Gesundheitsamt
            </th>
            <td mat-cell *matCellDef="let element">
              <i
                class="material-icons"
                *ngIf="element.transmittedToHealthDepartment"
                style="color: green"
                >done</i
              >
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumns"
            [routerLink]="['edit', row.id]"
          ></tr>
        </table>
      </mat-expansion-panel>
    </mat-accordion>
  </mat-card-content>
</mat-card>
